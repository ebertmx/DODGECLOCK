Version 4
SHEET 1 1356 692
WIRE 480 -432 368 -432
WIRE 672 -432 576 -432
WIRE 896 -432 672 -432
WIRE 1024 -432 896 -432
WIRE -96 -384 -96 -400
WIRE 112 -384 -96 -384
WIRE 256 -384 112 -384
WIRE 368 -384 368 -432
WIRE 368 -384 256 -384
WIRE 896 -368 896 -432
WIRE 672 -352 672 -432
WIRE 368 -336 368 -384
WIRE 496 -336 496 -384
WIRE 496 -336 432 -336
WIRE 496 -288 496 -336
WIRE 496 -288 400 -288
WIRE 1024 -288 1024 -432
WIRE 496 -256 496 -288
WIRE 112 -240 112 -304
WIRE 112 -240 -112 -240
WIRE 160 -240 112 -240
WIRE 256 -240 256 -304
WIRE 256 -240 224 -240
WIRE 400 -240 400 -288
WIRE 400 -240 256 -240
WIRE -112 -208 -112 -240
WIRE 112 -208 112 -240
WIRE -192 -192 -224 -192
WIRE -160 -192 -192 -192
WIRE 672 -176 672 -288
WIRE 672 -176 544 -176
WIRE 720 -176 672 -176
WIRE 896 -176 896 -288
WIRE 896 -176 800 -176
WIRE 496 -144 496 -160
WIRE -160 -112 -160 -144
WIRE -160 -112 -224 -112
WIRE 112 -64 112 -144
WIRE 576 -64 112 -64
WIRE 896 -64 896 -176
WIRE 896 -64 576 -64
WIRE 272 112 176 112
WIRE 480 112 352 112
WIRE 48 256 48 192
WIRE 80 256 48 256
WIRE 176 256 176 112
WIRE 176 256 160 256
WIRE 272 256 176 256
WIRE 576 256 576 -64
WIRE 432 272 336 272
WIRE 480 272 480 112
WIRE 480 272 432 272
WIRE 528 272 480 272
WIRE 272 288 240 288
WIRE 48 304 48 256
WIRE 48 480 48 384
FLAG -192 208 VBAT
FLAG 48 480 0
FLAG -192 288 0
FLAG 224 464 VREF
FLAG 240 288 VREF
FLAG 224 544 0
FLAG 304 240 0
FLAG 496 -144 0
FLAG 896 -432 VOUT
FLAG -96 -400 VBAT
FLAG 1024 -208 0
FLAG -112 -128 0
FLAG 48 112 VOUT
FLAG 576 352 0
FLAG 304 304 VOUT
FLAG -192 -192 SWITCH
FLAG 432 272 LOW_BAT
SYMBOL res 176 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 32 96 R0
SYMATTR InstName R3
SYMATTR Value 173k
SYMBOL res 32 288 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res 368 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL voltage -192 192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -346 -19 Left 2
SYMATTR InstName V1
SYMATTR Value PULSE(2.9 0 15 10 10)
SYMBOL voltage 224 448 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 1.21
SYMBOL OpAmps\\OP07 304 336 M180
SYMATTR InstName U1
SYMBOL pmos 576 -384 M270
SYMATTR InstName M1
SYMATTR Value FDR840P
SYMBOL nmos 544 -256 M0
SYMATTR InstName M2
SYMATTR Value BSB012N03LX3
SYMBOL voltage -224 -208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -13 -22 Left 2
WINDOW 3 -593 -79 Left 2
SYMATTR InstName V3
SYMATTR Value PWL(0 -1 0.9 -1 1 1 1.4 1 1.5 -1 2.9 -1 3 1 5.9 1 6 -1 6.9 -1 7 1 7.4 1 7.5 -1)
SYMBOL cap 224 -256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL res 96 -400 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 240 -400 R0
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL cap 432 -352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 100n
SYMATTR SpiceLine V=16 Irms=0 Rser=0 Lser=0
SYMBOL cap 656 -352 R0
SYMATTR InstName C3
SYMATTR Value 10µ
SYMBOL res 880 -384 R0
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL res 816 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 300k
SYMBOL sw -112 -112 M180
SYMATTR InstName S1
SYMATTR Value MSYS
SYMBOL diode 128 -144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 1008 -304 R0
SYMATTR InstName R9
SYMATTR Value 100
SYMBOL pmos 528 352 M180
SYMATTR InstName M3
SYMATTR Value FDR840P
SYMBOL voltage -1568 -32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -13 -22 Left 2
WINDOW 3 -151 -70 Left 2
SYMATTR InstName V4
SYMATTR Value PWL(0 -1 0.9 -1 1 1 1.4 1 1.5 -1)
TEXT 480 416 Left 2 !.lib opamp.sub
TEXT -168 -64 Left 2 !.model MSYS SW()
TEXT -280 -584 Left 2 !.tran 30 startup
